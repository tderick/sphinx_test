
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>risktests.Hosmer_Lemeshow_Chi_Square &#8212; Credit Risk Validation Tests 0.1.0 documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    <p class="title logo__title">Credit Risk Validation Tests 0.1.0 documentation</p>
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../installation.html">
  Installation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../usage.html">
  Usage
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../contributing.html">
  Contributing
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../authors.html">
  Credits
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../history.html">
  History
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../index.html">
  API Reference
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Concentration_of_Rating_Grades/index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     risktests.Concentration_of_Rating_Grades
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Expected_Loss_Best_Estimate_t_test/index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     risktests.Expected_Loss_Best_Estimate_t_test
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     risktests.Hosmer_Lemeshow_Chi_Square
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Jeffreys_test/index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     risktests.Jeffreys_test
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../LGD_t_test/index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     risktests.LGD_t_test
    </span>
   </code>
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Stability_of_Migration_Matrices/index.html">
   <code class="xref py py-mod docutils literal notranslate">
    <span class="pre">
     risktests.Stability_of_Migration_Matrices
    </span>
   </code>
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-contents">
   Module Contents
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#classes">
     Classes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#risktests.Hosmer_Lemeshow_Chi_Square.Hosmer_Lemeshow_Chi_Square">
       Hosmer_Lemeshow_Chi_Square
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="module-risktests.Hosmer_Lemeshow_Chi_Square">
<span id="risktests-hosmer-lemeshow-chi-square"></span><h1><a class="reference internal" href="#module-risktests.Hosmer_Lemeshow_Chi_Square" title="risktests.Hosmer_Lemeshow_Chi_Square"><code class="xref py py-mod docutils literal notranslate"><span class="pre">risktests.Hosmer_Lemeshow_Chi_Square</span></code></a><a class="headerlink" href="#module-risktests.Hosmer_Lemeshow_Chi_Square" title="Permalink to this heading">#</a></h1>
<p>The Hosmer-Lemeshow-Chi-squared test</p>
<p>Created on 2022-06-08</p>
<p>Author: Anton Treialt
License: BSD(3-clause)</p>
<p class="rubric">Notes</p>
<p>This test measures the squared difference between forecasted and observed defaults on bucket level.</p>
<dl class="simple">
<dt>The null hypotheisis makes two assumptions:</dt><dd><p>-That the  forecasted default probabilities and the observed default rates are identically distributed, and;
-that the defaults are independent.</p>
</dd>
</dl>
<p>According to Blochwitz et al. (2006), under the assumptions the test statistic converges to a chi-square distribution with B-2 degrees of
freedom if N (the number of observations) goes to infinity. Here B is the number of credit buckets.</p>
<dl class="simple">
<dt>The hypotheses are:</dt><dd><p>H0: The observed number of defaults is equal to the predicted number of defaults
H1: The number of predicted and observed defaults are unequal.</p>
</dd>
</dl>
<p>According to Tasche(2006), this test has several drawbacks. Firstly, for buckets with low number of facilities, there might be bad approximations.
Second, independence between facilities (borrowers) is assumed which can be justified using a point-in-time approach. Thirdly, the model makes no
distinction between deviations that are conservative or optimisitc even though they have different impact.Furthermore, the composed model test assumes
independence, but does take into account the difference between conservative and optimistic deviations.</p>
<p class="rubric">References</p>
<dl class="simple">
<dt>1.Blochwitz, S., Martin, M. R. W., &amp; Wehn, C. S. (2006). Statistical Approaches to PD Validation.</dt><dd><dl class="simple">
<dt>In B. Engelmann &amp; R. Rauhmeier (Eds.), The Basel II Risk Parameters: Estimation, Validation, and Stress Testing</dt><dd><p>(pp. 289–306). Springer. <a class="reference external" href="https://doi.org/10.1007/3-540-33087-9_13">https://doi.org/10.1007/3-540-33087-9_13</a></p>
</dd>
</dl>
</dd>
<dt>2.Tasche, D. (2006). Validation of internal rating systems and PD estimates (arXiv:physics/0606071).</dt><dd><p>arXiv. <a class="reference external" href="http://arxiv.org/abs/physics/0606071">http://arxiv.org/abs/physics/0606071</a></p>
</dd>
</dl>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Permalink to this heading">#</a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#risktests.Hosmer_Lemeshow_Chi_Square.Hosmer_Lemeshow_Chi_Square" title="risktests.Hosmer_Lemeshow_Chi_Square.Hosmer_Lemeshow_Chi_Square"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Hosmer_Lemeshow_Chi_Square</span></code></a></p></td>
<td><p>Performs the Hosmer-Lemeshow Chi-Square test to validate credit data given the loan buckets, loan statuses and probabilitities of default.</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="risktests.Hosmer_Lemeshow_Chi_Square.Hosmer_Lemeshow_Chi_Square">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">risktests.Hosmer_Lemeshow_Chi_Square.</span></span><span class="sig-name descname"><span class="pre">Hosmer_Lemeshow_Chi_Square</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buckets_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loan_statuses_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PDs_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/risktests/Hosmer_Lemeshow_Chi_Square.html#Hosmer_Lemeshow_Chi_Square"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#risktests.Hosmer_Lemeshow_Chi_Square.Hosmer_Lemeshow_Chi_Square" title="Permalink to this definition">#</a></dt>
<dd><p>Performs the Hosmer-Lemeshow Chi-Square test to validate credit data given the loan buckets, loan statuses and probabilitities of default.</p>
<p>Assumes at least a 3D dataframe or 3D array-like dataset is passed to the arguement ‘data’ but requires the buckets column, loan status column and probability-of-default column names to be
passed to the corresponding arguments.</p>
<p>If verbose is set to True, the test results and interpretation will be printed, the default is False.</p>
<p>alpha must be set otherwise a TypeError is raised.
:param
data : array_like, 3-D of higher
buckets_col : name of column with buckets
loan_status_col : name of column with loan statuses
PDs_col : name of column with probabilities-of-default
alpha: the tests level of significance. either 1%, 5% or 10%
verbose: boolean. Prints the results if true.
:return
data: data passed into the function call
bucket_levels: unique buckets in the data
HLC_stat: Hosmer-Lemeshow test statistic
alpha: the test’s significance level
p_value: the test’s p-value
verbose: boolean passed to function call to print results or not.
critical_value: the critical value of the test
dof: the test’s degrees of freedom</p>
<p class="rubric">Example</p>
<p>&gt;&gt;import Hosmer_Lemeshow_Chi_Square as HLC
&gt;&gt;import pandas as pd
&gt;&gt;import numpy as np</p>
<p>&gt;&gt;# Sampling the buckets randomly at fixed probabilities
&gt;&gt;buckets = np.random.choice(a=[“Bucket one”,”Bucket two”,”Bucket three”,”Bucket four”,”Bucket five”], p = [0.15,0.25,0.05,0.05,0.5], size=1000)
&gt;&gt;loan_status = np.random.choice(a=[“default”, “non-default”], p=[0.3,0.7], size=1000)</p>
<p>&gt;&gt;probs = []</p>
<p>&gt;&gt;for i in range(len(buckets)):
&gt;&gt;    if buckets[i] == ‘Bucket one’:
&gt;&gt;        probs.append(0.15)
&gt;&gt;    elif buckets[i] == ‘Bucket two’:
&gt;&gt;        probs.append(0.25)
&gt;&gt;    elif buckets[i] == ‘Bucket three’:
&gt;&gt;        probs.append(0.05)
&gt;&gt;    elif buckets[i] == ‘Bucket four’:
&gt;&gt;        probs.append(0.05)
&gt;&gt;    elif buckets[i] == ‘Bucket five’:
&gt;&gt;        probs.append(0.5)
&gt;&gt;
&gt;&gt;probs = np.array(probs)</p>
<p>&gt;&gt;loan_data = pd.DataFrame({‘loan_bucket’: buckets,
&gt;&gt;                          ‘loan_status’: loan_status,
&gt;&gt;                          ‘PD’: probs})</p>
<p>&gt;&gt;output = HLC.Hosmer_Lemeshow_Chi_Square(data=loan_data, buckets_col=’loan_bucket’, loan_statuses_col=’loan_status’, PDs_col=’PD’, alpha=0.05, verbose=True)
&gt;&gt;output.HLC_stat # Shows the Hower-Lemeshow statistic
&gt;&gt;output.p_value # Shows the p-value</p>
</dd></dl>

</section>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, Anton Treialt.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.2.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>